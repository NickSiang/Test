<script>
import MonoChrome from "@/components/MonoChrome.vue";
import DonateCard from "@/components/DonateCard.vue";
import Marquee from "@/components/Marquee.vue";
import Swiper from "@/components/Swiper.vue";

import card1 from '@/assets/img/bg.png';
import card2 from '@/assets/img/donate-1.jpg';
import card3 from '@/assets/img/seervice/ex1.jpg';

export default {
    data() {
        return {
            maincard: [
                {
                    link: "",
                    label: "å‹Ÿé›†",
                    src: card1,
                    tittle: "ç¯„ä¾‹å¡ç‰‡",
                    content: "ç•¶å¡ç‰‡çµ¦å…¨éƒ¨è³‡æ–™æ™‚çš„æ¨£å­(æœƒåˆ¤æ–·é é¢æˆ–æ¨™ç±¤ä¾†é•·å‡ºå°æ‡‰å…§å®¹) æ–‡å­—æœ€å¤šå…©è¡Œ æ–‡å­—æœ€å¤šå…©è¡Œ æ–‡å­—æœ€å¤šå…©è¡Œ æ–‡å­—æœ€å¤šå…©è¡Œ",
                    goal: "é€²åº¦æ¢ç›®æ¨™",
                    starttime: "é–‹å§‹æ—¥æœŸ",
                    endtime: "çµæŸæ—¥æœŸ",
                    progressbar: "50%",
                    peoplemount: "åƒåŠ äººæ•¸",
                    day: "å…±å¹¾å¤©",
                },
                {
                    link: "DonatePage01",
                    label: "ææ¬¾",
                    src: card2,
                    tittle: "è–æ„›å±±èŠ-å»ºè¨­åŸºé‡‘",
                    content: "éœ€è¦æ‚¨å’Œæˆ‘å€‘ä¸€èµ·å®Œæˆå¤§è‡ªç„¶ä¸­çš„è€äººç¦åˆ©åœ’å€",
                    goal: "",
                    starttime: "2021.10",
                    endtime: "...",
                    progressbar: "",
                    peoplemount: "",
                    day: "",
                },
                {
                    link: "ActivePage01",
                    label: "å©¦å¥³",
                    src: card3,
                    tittle: "æ–°ä½æ°‘å®¶åº­æ´»å‹•",
                    content: "é€éå¤šå…ƒæ–‡åŒ–äº¤æµèˆ‡æº«é¦¨æ´»å‹•ï¼Œè®“æ–°ä½æ°‘å®¶åº­å…±å‰µå¹¸ç¦èˆ‡èå’Œçš„ç¾å¥½æ™‚å…‰ã€‚",
                    goal: "",
                    starttime: "å³æ—¥èµ·",
                    endtime: "2025.01.14",
                    progressbar: "",
                    peoplemount: "åƒåŠ äººæ•¸:20äºº",
                    day: "",
                },
            ],
            currentNewsIndex: 0,
            newsList: [
                {
                    date: "2024-01-05",
                    message: "æˆ‘å€‘é€²è¡Œä¸­çš„å¿—å·¥æœå‹™æœ‰æ„›ç›¸å‚³ç«ç†±å ±åä¸­!",
                },
                {
                    date: "2024-02-01",
                    message: "æ–°æ˜¥é—œæ‡·æ´»å‹•å³å°‡é–‹è·‘ï¼Œæ­¡è¿åŠ å…¥æˆ‘å€‘ï¼ğŸ§¨",
                },
                {
                    date: "2024-03-10",
                    message: "ğŸ€ğŸ€å¥³æ€§é—œæ‡·è¨ˆåŠƒç¬¬äºŒæœŸèª²ç¨‹å ±åé–‹æ”¾ï¼",
                },
            ],
        }
    },
    components: {
        MonoChrome,
        DonateCard,
        Marquee,
        Swiper
    },
    mounted() {
        this.startNewsRotation();
        let all = document.getElementById("all");
        let imagePanel = document.getElementsByClassName("image");

        for (let i = 0; i < imagePanel.length; i++) {
            imagePanel[i].addEventListener("mouseover", function () {
                // æ”¾å¤§æ»‘é¼ æ‡¸åœçš„åœ–ç‰‡ï¼Œç¸®å°å…¶é¤˜åœ–ç‰‡
                imagePanel[i].style.flex = "2";
                for (let j = 0; j < imagePanel.length; j++) {
                    if (j !== i) {
                        imagePanel[j].style.flex = "1";
                    }
                }
            });

            imagePanel[i].addEventListener("mouseout", function () {
                // æ¢å¾©æ‰€æœ‰åœ–ç‰‡çš„åˆå§‹ç‹€æ…‹
                for (let j = 0; j < imagePanel.length; j++) {
                    imagePanel[j].style.flex = "1";
                }
            });
        }
    },
    computed: {
        currentNews() {
            return this.newsList[this.currentNewsIndex];
        },
    },
    methods: {
        startNewsRotation() {
            setInterval(() => {
                this.currentNewsIndex =
                    (this.currentNewsIndex + 1) % this.newsList.length;
            }, 5000); 
        },
    },
};
</script>

<template>

    <header class="h-[920px] flex flex-col item-center sticky top-0 cursor-pointer">
        <section
            class="absolute bg-fixed top-0 -z-10 w-full h-[100vh] animate-moveBackground bg-[url('../assets/img/header-bg.png')] bg-cover bg-center">
            <img class="absolute top-0 bg-fixed -z-10" src="../assets/img/header-bannar.png" alt="" />
        </section>
        <section class="w-full h-full flex items-center">
            <div
                class="w-fit h-[120px] mx-[10%] mt-[172px] p-[30px] flex items-center gap-[32px] rounded-[22px] bg-black/30 backdrop-blur-[30px] text-white">
                <div class="text-[32px]">NEWS</div>
                <div>
                    <h5>{{ currentNews.date }}</h5>
                    <h5>{{ currentNews.message }}</h5>
                </div>
            </div>
        </section>
    </header>

    <main class=" max-w-[1920px] relative flex items-center flex-col bg-[url('../assets/img/main-bg.png')] bg-cover">
        <!-- <img class="opacity-0" src="../assets/img/main-bg-m.png" alt=""> -->
        <Swiper class="mt-[800px] mb-[500px]"></Swiper>


        <div class="max-w-[1280px] w-full flex flex-col">

            <section class="w-full h-[560px] my-[200px] ">

                <div class="w-full h-full flex justify-between relative">

                    <div class="w-1/2 flex flex-col justify-around items-center">
                        <h1 class="text-[#468097]">æˆ‘å€‘æä¾›é—œæ‡·æœå‹™</h1>
                        <div class="w-[400px] h-[400px] bg-white/50 rounded-[50%] ">
                            <img src="../assets/img/main-circle.png" alt="">
                        </div>
                    </div>

                    <div id="all" class="flex w-1/2 px-[80px] items-center flex-col ">

                        <div class="image active rounded-[50px] flex-[1] w-full relative m-[10px] group">
                            <router-link to="">
                                <div class="w-full h-full px-7 py-2 flex gap-5 items-end">
                                    <h2 class="text-white">æ•™è‚²</h2>
                                    <h5
                                        class="text-white opacity-0 group-hover:opacity-100 group-hover:visible transition-all duration-1000">
                                        æº«æŸ”çš„å¿ƒé—œæ³¨ç¤¾æœƒéœ€æ±‚ï¼Œçµåˆç¤¾å€åŠ›é‡</h5>
                                </div>
                            </router-link>
                        </div>

                        <div class="image active rounded-[50px] flex-[1] w-full relative m-[10px] group">
                            <router-link to="">
                                <div class="w-full h-full px-7 py-2 flex gap-5 items-end">
                                    <h2 class="text-white">æ•™è‚²</h2>
                                    <h5
                                        class="text-white opacity-0 group-hover:opacity-100 group-hover:visible transition-all duration-1000">
                                        æº«æŸ”çš„å¿ƒé—œæ³¨ç¤¾æœƒéœ€æ±‚ï¼Œçµåˆç¤¾å€åŠ›é‡</h5>
                                </div>
                            </router-link>
                        </div>

                        <div class="image active rounded-[50px] flex-[1] w-full relative m-[10px] group">
                            <router-link to="">
                                <div class="w-full h-full px-7 py-2 flex gap-5 items-end">
                                    <h2 class="text-white">æ•™è‚²</h2>
                                    <h5
                                        class="text-white opacity-0 group-hover:opacity-100 group-hover:visible transition-all duration-1000">
                                        æº«æŸ”çš„å¿ƒé—œæ³¨ç¤¾æœƒéœ€æ±‚ï¼Œçµåˆç¤¾å€åŠ›é‡</h5>
                                </div>
                            </router-link>
                        </div>

                        <div class="image active rounded-[50px] flex-[1] w-full relative m-[10px] group">
                            <router-link to="">
                                <div class="w-full h-full px-7 py-2 flex gap-5 items-end">
                                    <h2 class="text-white">æ•™è‚²</h2>
                                    <h5
                                        class="text-white opacity-0 group-hover:opacity-100 group-hover:visible transition-all duration-1000">
                                        æº«æŸ”çš„å¿ƒé—œæ³¨ç¤¾æœƒéœ€æ±‚ï¼Œçµåˆç¤¾å€åŠ›é‡</h5>
                                </div>
                            </router-link>
                        </div>
                    </div>

                </div>
            </section>

            <section class="w-full flex flex-col items-center ">

                <div class="w-full mt-[500px] mb-[100px]">
                    <h1 class="mb-[50px] text-white">æœ€æ–°æ¶ˆæ¯</h1>
                    <div class="w-full flex justify-between gap-x-[30px] gap-y-[50px] relative py-[20px]">
                        <DonateCard v-for="(card, index) in maincard" :key="index" :link="card.link" :label="card.label"
                            :src="card.src" :tittle="card.tittle" :content="card.content" :goal="card.goal"
                            :starttime="card.starttime" :endtime="card.endtime" :progressbar="card.progressbar"
                            :peoplemount="card.peoplemount" :day="card.day" />
                    </div>
                </div>
            </section>

            <Marquee />
        </div>
        <img src="../assets/img/footer-mountain.png" alt="" />
    </main>

</template>

<style scoped>
.image {
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
    transition: flex 0.7s cubic-bezier(0.05, 0.6, 0.4, 0.9);
    background-image: url(../assets/img/seervice/education/æ›‰æ˜é•·é’.jpg);
}

.image.active {
    flex: 1;
}
</style>
